<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>やっちゃん誕生会 参加予約</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  background:#e7f1ff;
  font-family: "Yu Gothic","メイリオ",sans-serif;
}

.container{
  width:720px;
  max-width:95%;
  margin:40px auto;
  background:white;
  border-radius:10px;
  padding:30px;
}

.title{
  font-weight:bold;
  font-size:20px;
}

.sub{
  color:#555;
  font-size:12px;
  margin-bottom:20px;
}

.slot{
  border:1px solid #ddd;
  border-radius:8px;
  padding:12px;
  margin:10px 0;
  display:flex;
  align-items:center;
  gap:15px;
}

.icon{
  width:30px;
  text-align:center;
  font-weight:bold;
}

/* 本家寄せ */
.ok,.warn,.ng{
  font-size:18px;
  line-height:18px;
}
.ok{ color:#3090ff;}
.warn{ color:#d4a000;}
.ng{ color:#d40000;}

.bottomButton{
  background:#d80000;
  color:white;
  padding:18px;
  margin-top:25px;
  border-radius:8px;
  text-align:center;
  font-size:18px;
  cursor:pointer;
}

.modalBg{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  display:none;
  justify-content:center;
  align-items:center;
}

.modal{
  background:white;
  padding:25px;
  border-radius:10px;
  width:340px;
  text-align:center;
}

.big-text{
  font-size:18px;
  font-weight:bold;
  line-height:35px;
}

/* QRページ */
.qrScreen{
  display:none;
  text-align:center;
  padding:40px;
}

</style>
</head>

<body>

<div id="mainScreen" class="container">

<div class="title">2026年1月1日(木)</div>
<div class="sub">やっちゃん&かづとくん　合同・誕生日会 参加時間帯を選んでください</div>

<!-- 8枠（昼帯版） -->
<div class="slot">
<span class="icon ok">○</span>
<input type="radio" name="time" value="12:00">12:00〜
</div>

<div class="slot">
<span class="icon warn">△</span>
<input type="radio" name="time" value="12:20">12:20〜
</div>

<div class="slot">
<span class="icon ok">○</span>
<input type="radio" name="time" value="12:40">12:40〜
</div>

<div class="slot">
<span class="icon ok">○</span>
<input type="radio" name="time" value="13:00">13:00〜
</div>

<div class="slot">
<span class="icon warn">△</span>
<input type="radio" name="time" value="13:20">13:20〜
</div>

<div class="slot">
<span class="icon ng">×</span>
<input type="radio" disabled>13:40〜（選択不可）
</div>

<div class="slot">
<span class="icon ok">○</span>
<input type="radio" name="time" value="14:00">14:00〜
</div>

<div class="slot">
<span class="icon warn">△</span>
<input type="radio" name="time" value="14:20">14:20〜
</div>

<div id="submitButton" class="bottomButton">
この時間で参加する →
</div>
</div>


<!-- ▼ 成功モーダル（閉じるボタン無し・10秒拘束） -->
<div id="success" class="modalBg">
<div class="modal">
<div class="big-text">
＜ 空き枠発見 ＞<br>
誕生日会の参加予約が<br>
確定しました！
</div>

<div id="successTime" style="margin-top:10px;"></div>

<p style="font-size:12px;margin-top:10px;">
このあと入場用QRコードが表示されます。<br>
スクリーンショットして当日入口で提示してください。
</p>

<p style="margin-top:10px;font-size:11px;color:#777;">
自動的にQRコード画面へ移動します…
</p>

</div>
</div>


<!-- ▼ QR画面（本物QR生成版） -->
<div id="qr" class="qrScreen">
  <h2>入場用QRコード</h2>

  <div id="qrcode" 
       style="margin:40px auto;width:240px;height:240px;background:white;
       padding:10px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,0.2);">
  </div>

  <p style="margin-top:15px;">
  この画面をスクリーンショットして保存してください。
  </p>
</div>

<!-- QRコードライブラリ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>



<script>

const btn = document.getElementById("submitButton");

btn.addEventListener("click", ()=>{

 const checked = document.querySelector('input[name="time"]:checked');
 if(!checked){
   alert("時間帯を選択してください。");
   return;
 }

 btn.innerText = "処理中…";
 btn.style.opacity = "0.6";
 btn.style.pointerEvents = "none";

 // 3秒処理→成功モーダル
 setTimeout(()=>{
   showSuccess(checked.value);
 },3000);
});


function showSuccess(time){
 document.getElementById("successTime").innerText="参加時間："+time;
 document.getElementById("success").style.display="flex";

 // 10秒後 → 自動でQRへ
 setTimeout(()=>{
   document.getElementById("success").style.display="none";
   document.getElementById("mainScreen").style.display="none";
   document.getElementById("qr").style.display="block";
 },10000);

   const randomId = "BIRTHDAY-" + 
     Math.random().toString(36).substring(2,6).toUpperCase() + "-" +
     Math.random().toString(36).substring(2,6).toUpperCase();

   new QRCode(document.getElementById("qrcode"), {
     text: randomId,
     width: 240,
     height: 240,
     colorDark: "#000000",
     colorLight: "#ffffff",
     correctLevel: QRCode.CorrectLevel.H
   });

  
 resetBtn();
}

function resetBtn(){
 btn.innerText="この時間で参加する →";
 btn.style.opacity="1";
 btn.style.pointerEvents="auto";
}

</script>

</body>
</html>




