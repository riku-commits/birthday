<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>やっちゃん誕生会 参加予約</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  background:#e7f1ff;
  font-family:"Yu Gothic","メイリオ",sans-serif;
}

/* メイン */
.container{
  width:720px;
  max-width:95%;
  margin:40px auto;
  background:white;
  border-radius:10px;
  padding:30px;
}

.title{ font-size:20px; font-weight:bold; }
.sub{ font-size:12px; color:#555; margin-bottom:15px; }

.slot{
  border:1px solid #ddd;
  border-radius:8px;
  padding:12px;
  margin:10px 0;
  display:flex;
  align-items:center;
  gap:15px;
}

.icon{
  font-size:24px;
  width:30px;
  text-align:center;
  font-weight:bold;
}

.ok{color:#007BFF;}
.mid{color:#e6a400;}
.ng{color:#ff2b2b;}

.bottomButton{
  background:#d80000;
  color:white;
  padding:18px;
  margin-top:25px;
  border-radius:8px;
  text-align:center;
  font-size:18px;
  cursor:pointer;
}

/* ===============================
   ▼ 本家風モーダル
=============================== */
.modalBg{
  position:fixed;
  inset:0;
  backdrop-filter:blur(1px);
  background:rgba(0,0,0,.45);
  display:none;
  justify-content:center;
  align-items:center;
}

.modal{
  width:340px;
  background:#fff;
  border-radius:8px;
  padding:22px;
  text-align:center;
  position:relative;
}

.closeBtn{
  position:absolute;
  right:12px;
  top:10px;
  font-size:26px;
  cursor:pointer;
}

.big-text{
  font-size:17px;
  font-weight:bold;
  line-height:30px;
}

.modal button{
  width:90%;
  padding:14px;
  margin-top:15px;
  border:1px solid #333;
  border-radius:6px;
  background:#fff;
}

/* ===============================
   ▼ 待機画面
=============================== */
.waitScreen{
  display:none;
  background:#333;
  color:white;
  padding:35px;
  text-align:center;
}

/* ===============================
   ▼ エラー画面
=============================== */
.errorPage{
  display:none;
  padding:40px;
  text-align:center;
}
</style>
</head>

<body>

<!-- メイン画面 -->
<div id="mainScreen" class="container">

<div class="title">2025年12月30日(火)</div>
<div class="sub">やっちゃん誕生日会 参加時間帯を選んでください</div>

<div class="slot"><span class="icon ok">○</span><input type="radio" name="time" value="18:00">18:00〜</div>
<div class="slot"><span class="icon mid">△</span><input type="radio" name="time" value="18:20">18:20〜</div>
<div class="slot"><span class="icon ok">○</span><input type="radio" name="time" value="18:40">18:40〜</div>
<div class="slot"><span class="icon ok">○</span><input type="radio" name="time" value="19:00">19:00〜</div>
<div class="slot"><span class="icon mid">△</span><input type="radio" name="time" value="19:20">19:20〜</div>
<div class="slot"><span class="icon ng">×</span><input disabled>19:40〜</div>
<div class="slot"><span class="icon ok">○</span><input type="radio" name="time" value="20:00">20:00〜</div>
<div class="slot"><span class="icon mid">△</span><input type="radio" name="time" value="20:20">20:20〜</div>

<div id="submitButton" class="bottomButton">
この時間で参加する →
</div>
</div>

<!-- ===============================
    ▼ 待機画面
================================ -->
<div id="waitScreen" class="waitScreen">
<h2>順番にご案内しております。</h2>
<p>現在サイトが大変混雑しております。<br>しばらくお待ちください…</p>
<div>⏳ 待ち時間目安：10秒</div>
</div>

<!-- ===============================
    ▼ エラー画面
================================ -->
<div id="errorScreen" class="errorPage">
<h2>ご確認ください</h2>
<p>処理を完了できませんでした。</p>
<button onclick="restart()">トップへ戻る</button>
</div>

<!-- ===============================
    ▼ 予約成功（本家コピー）
================================ -->
<div id="success" class="modalBg">
<div class="modal">
<div class="closeBtn" onclick="closeAll()">×</div>

<div class="big-text">
＜ 空き枠先着 ＞<br>
パビリオン／イベントが<br>
予約されました
</div>

<br>
<div id="successTime"></div>

<button onclick="closeAll()">とじる</button>
</div>
</div>

<!-- ===============================
    ▼ 予約失敗（本家コピー）
================================ -->
<div id="fail" class="modalBg">
<div class="modal">
<div class="closeBtn" onclick="closeAll()">×</div>

<div class="big-text">
＜ 空き枠先着 ＞<br>
パビリオン／イベントの予約が<br>
確保できませんでした
</div>

<br>
お手数ですが、<br>
パビリオン／催事を再度選択してください。

<button onclick="closeAll()">とじる</button>
</div>
</div>


<script>
const btn=document.getElementById("submitButton");

btn.addEventListener("click",()=>{

 const checked=document.querySelector('input[name="time"]:checked');
 if(!checked){ alert("時間帯を選択してください。"); return; }

 btn.innerText="処理中…";
 btn.style.opacity="0.6";
 btn.style.pointerEvents="none";

 const fate=Math.random(); // 運命

 setTimeout(()=>{

   if(fate < 0.30){ showWait(); return;}     // 30% 待機
   if(fate < 0.55){ showError(); return;}    // 25% エラー
   if(fate < 0.99){ showFail(); return;}     // 44% 失敗
   showSuccess(checked.value);              // 1% 神当選

 },1200);
});

function showWait(){
 document.getElementById("mainScreen").style.display="none";
 document.getElementById("waitScreen").style.display="block";

 setTimeout(()=>{
  document.getElementById("waitScreen").style.display="none";
  document.getElementById("mainScreen").style.display="block";
  resetBtn();
 },10000);
}

function showError(){
 document.getElementById("mainScreen").style.display="none";
 document.getElementById("errorScreen").style.display="block";
}

function showSuccess(time){
 document.getElementById("successTime").innerText="予約時間 "+time;
 document.getElementById("success").style.display="flex";
 resetBtn();
}

function showFail(){
 document.getElementById("fail").style.display="flex";
 resetBtn();
}

function closeAll(){
 document.querySelectorAll(".modalBg").forEach(m=>m.style.display="none");
}

function restart(){ location.reload(); }

function resetBtn(){
 btn.innerText="この時間で参加する →";
 btn.style.opacity="1";
 btn.style.pointerEvents="auto";
}
</script>

</body>
</html>
