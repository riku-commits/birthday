<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>やっちゃん誕生日会 参加予約</title>

<style>
body{
    font-family:"Yu Gothic","メイリオ",sans-serif;
    background:#ffffff;
    margin:0;
}

/* ---- HEADER ---- */
header{
    background:#005bac;
    color:white;
    padding:12px 18px;
    font-size:18px;
    font-weight:bold;
}

/* ---- CONTAINER ---- */
.wrapper{
    max-width:800px;
    margin:0 auto;
    padding:20px;
}

/* BOX */
.box{
    border:1px solid #ddd;
    border-radius:10px;
    padding:18px;
    background:#fff;
}

/* タイトル */
.dateTitle{
    font-size:18px;
    font-weight:bold;
}

.subText{
    font-size:12px;
    color:#666;
}

/* ---- SLOT ---- */
.slot{
    display:flex;
    align-items:center;
    justify-content:space-between;
    border:1px solid #ddd;
    border-radius:8px;
    padding:12px 12px 12px 10px;
    margin-top:10px;
    background:#fafafa;
}

.left{
    display:flex;
    align-items:center;
    gap:10px;
}

.slot input{
    transform:scale(1.3);
}

.time{
    font-size:15px;
}

.status{
    font-size:22px;
}

/* 選択ガイド（○△×） */
.legendBox{
    margin-top:12px;
    padding:8px;
    border-top:1px dashed #ccc;
    display:flex;
    gap:18px;
    font-size:13px;
}

/* ---- 選択結果エリア ---- */
.selectedBox{
    margin-top:18px;
    padding:12px;
    border-radius:6px;
    background:#fdecec;
    border:1px solid #ff9e9e;
    text-align:center;
    font-weight:bold;
}

/* ---- ボタン ---- */
.reserveBtn{
    width:100%;
    margin-top:12px;
    background:#d80000;
    border:none;
    color:white;
    padding:16px;
    border-radius:12px;
    font-size:16px;
}

/* ---- 下のグレー枠 ---- */
.bottomNote{
    margin-top:12px;
    padding:14px;
    border:1px solid #ddd;
    border-radius:10px;
    background:#fafafa;
}

.bottomNote span{
    color:red;
}

/* ---- MODAL ---- */
.modalBg{
    display:none;
    position:fixed;
    top:0;left:0;
    width:100%;height:100%;
    background:rgba(0,0,0,0.75);
    justify-content:center;
    align-items:center;
}

.modalBox{
    width:360px;
    background:white;
    border-radius:10px;
    padding:20px;
    text-align:center;
}

.closeBtn{
    width:90%;
    margin-top:15px;
    padding:10px;
    border-radius:8px;
    border:1px solid #333;
}
</style>
</head>

<body>

<header>やっちゃん誕生日会 参加予約</header>

<div class="wrapper">
<div class="box">

<div class="dateTitle">2025年12月30日(火)</div>
<div class="subText">12月30日 やっちゃん誕生日会／参加時間帯を選んでください</div>

<div id="slotArea"></div>

<div class="legendBox">
    <div>⭕ 空きあり</div>
    <div>△ 少し混雑</div>
    <div>❌ 満員（予約不可）</div>
</div>

<div class="selectedBox" id="selectedText">
未選択
</div>

<button class="reserveBtn" onclick="reserve()">この時間で参加する →</button>

<div class="bottomNote">
<span>・</span> 他のイベントの選択にもどる
</div>

</div>
</div>


<!-- ===== MODAL ===== -->
<div class="modalBg" id="modal">
    <div class="modalBox">
        <div id="modalText">処理中です…</div>
        <button class="closeBtn" onclick="closeModal()">とじる</button>
    </div>
</div>


<script>
/* ========== 時間帯(本家風8枠固定) ========== */
const times = [
 "18:00〜","18:20〜","18:40〜","19:00〜",
 "19:20〜","19:40〜","20:00〜","20:20〜"
];

let selected = "";

/* ========== 本家っぽい割合で ○△× をランダム ======== */
/* ○ = 35%  △ = 35%  × = 30% */
function drawSlots(){
    const area = document.getElementById("slotArea");
    area.innerHTML = "";

    times.forEach(t=>{
        const r = Math.random()*100;
        let mark="⭕";
        let disable="";

        if(r < 30){ mark="❌"; disable="disabled"; }
        else if(r < 65){ mark="△"; }

        area.innerHTML += `
        <div class="slot">
            <div class="left">
                <input type="radio" name="time" value="${t}" ${disable} onclick="setSelect('${t}')">
                <div class="time">${t}</div>
            </div>
            <div class="status">${mark}</div>
        </div>`;
    })
}

drawSlots();

/* ========== 選択表示 ========== */
function setSelect(t){
    selected=t;
    document.getElementById("selectedText").innerText = "選択中：" + t;
}

/* ========== 予約処理 ========== */
function reserve(){

    if(!selected){
        alert("時間帯を選択してください");
        return;
    }

    const modal=document.getElementById("modal");
    modal.style.display="flex";
    document.getElementById("modalText").innerHTML =
        "アクセスが集中しています…<br>順番に処理しています";

    setTimeout(()=>{
        const r=Math.random()*100;

        if(r<4){
            document.getElementById("modalText").innerHTML =
            "＜ 空き枠先着 ＞<br>誕生日会の参加予約が<br>確定しました！";
        }
        else if(r<58){
            document.getElementById("modalText").innerHTML =
            "＜ 空き枠先着 ＞<br>誕生日会の参加予約を<br>確保できませんでした";
        }
        else{
            document.getElementById("modalText").innerHTML =
            "エラーが発生しました<br>処理を中断しました<br><br>(E_SW_GP_DL_999_900_1)";
        }

    },3800);
}

function closeModal(){
    document.getElementById("modal").style.display="none";
}
</script>

</body>
</html>
