<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>EXPO2025 äºˆç´„ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>

<style>
body{
  background:#e9f0ff;
  font-family:Arial, "ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ ProN", Meiryo;
  text-align:center;
}

/* å…±é€š */
.modalBg{
  position:fixed;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  background:rgba(0,0,0,0.6);
  z-index:9999;
}

.modal{
  background:white;
  padding:28px 20px;
  border-radius:14px;
  width:310px;
}

/************
 æˆåŠŸãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—
************/
.popupCard{
  background:white;
  border-radius:12px;
  padding:20px;
  width:290px;
  text-align:center;
}

.popupTitle{
  font-size:16px;
  font-weight:bold;
  line-height:28px;
}

.popupIcon{
  font-size:40px;
  margin:10px 0;
}

.popupTime{
  font-size:13px;
  margin:8px 0 12px;
}

.popupBtn{
  width:100%;
  padding:10px;
  border:1px solid #444;
  border-radius:6px;
  background:white;
}

/************
 å¾…æ©Ÿãƒšãƒ¼ã‚¸
************/
.waitBox{
  background:#303030;
  color:white;
  padding:40px 20px;
  border-radius:12px;
  width:70%;
  margin:auto;
}

.barOuter{
  width:90%;
  height:20px;
  margin:20px auto;
  background:#777;
  border-radius:4px;
}

.barInner{
  width:30%;
  height:100%;
  background:#39ff5a;
}

/************
 QRç”»é¢
************/
.qrOuter{
  padding:12px;
  border:3px solid #111;
  display:inline-block;
}

.realQR{
  width:240px;
  height:240px;
  position:relative;
}

.finder{
  width:60px;
  height:60px;
  border:8px solid #000;
  position:absolute;
}
.tl{top:0;left:0;}
.tr{top:0;right:0;}
.bl{bottom:0;left:0;}

.big-text{
  font-size:18px;
  font-weight:bold;
  margin-bottom:10px;
}
</style>
</head>

<body>

<h2>ã‚„ã£ã¡ã‚ƒã‚“èª•ç”Ÿä¼š äºˆç´„ãƒœã‚¿ãƒ³</h2>
<button onclick="startReservation()" style="padding:14px 26px;font-size:18px;">
  ã“ã®æ™‚é–“ã§å‚åŠ ã™ã‚‹ â†’
</button>

<!-- â–¼ å¾…æ©Ÿ -->
<div id="waitPage" class="modalBg">
  <div class="waitBox">
    <h2>é †ç•ªã«ã”æ¡ˆå†…ã—ã¦ãŠã‚Šã¾ã™ã€‚</h2>
    <p>ç¾åœ¨ã‚µã‚¤ãƒˆãŒå¤§å¤‰æ··é›‘ã—ã¦ãŠã‚Šã¾ã™ã€‚</p>

    <div class="barOuter">
      <div class="barInner"></div>
    </div>

    <p>ã”è‡ªèº«ã®å‰ã«ä¸¦ã‚“ã§ã„ã‚‹äººæ•°ï¼š433</p>
    <p>å¾…ã¡æ™‚é–“ã®ç›®å®‰ï¼š1åˆ†</p>
  </div>
</div>


<!-- â–¼ æˆåŠŸãƒãƒƒãƒ—ã‚¢ãƒƒãƒ— -->
<div id="successPopup" class="modalBg">
  <div class="popupCard">
    <div class="popupTitle">
      ï¼œ ç©ºãæ ç™ºè¦‹ ï¼<br>
      ãƒ‘ãƒ“ãƒªã‚ªãƒ³/ã‚¤ãƒ™ãƒ³ãƒˆãŒ<br>
      äºˆç´„ã•ã‚Œã¾ã—ãŸ
    </div>

    <div class="popupIcon">
      ğŸ“…ğŸ•’
    </div>

    <div class="popupTime">
      å‚åŠ æ™‚é–“ï¼š<span id="successTimeText">19:20</span>
    </div>

    <button class="popupBtn">ã¨ã˜ã‚‹</button>
  </div>
</div>


<!-- â–¼ ã‚¨ãƒ©ãƒ¼ -->
<div id="errorPage" class="modalBg">
  <div class="modal">
    <h2>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>
    <p>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸãŸã‚å‡¦ç†ã‚’ä¸­æ–­ã—ã¾ã—ãŸã€‚</p>
    <p>(ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ï¼šE_SW_GP_DL_004_9_900_16)</p>
    <button onclick="closeAll()">ãƒˆãƒƒãƒ—ã¸ã‚‚ã©ã‚‹</button>
  </div>
</div>


<!-- â–¼ äºˆç´„å¤±æ•— -->
<div id="failPage" class="modalBg">
  <div class="modal">
    <h2>ï¼œ ç©ºãæ å…ˆç€ ï¼</h2>
    <p>ãƒ‘ãƒ“ãƒªã‚ªãƒ³/ã‚¤ãƒ™ãƒ³ãƒˆã®äºˆç´„ãŒ<br>ç¢ºä¿ã§ãã¾ã›ã‚“ã§ã—ãŸ</p>
    <p>ãƒ‘ãƒ“ãƒªã‚ªãƒ³/å‚¬äº‹ã‚’å†åº¦é¸æŠã—ã¦ãã ã•ã„</p>
    <button onclick="closeAll()">ã¨ã˜ã‚‹</button>
  </div>
</div>


<!-- â–¼ QRæˆåŠŸ -->
<div id="qrShow" class="modalBg">
  <div class="modal">
    <div class="big-text">å…¥å ´ç”¨QRã‚³ãƒ¼ãƒ‰</div>

    <div class="qrOuter">
      <div class="realQR">
        <div class="finder tl"></div>
        <div class="finder tr"></div>
        <div class="finder bl"></div>
        <canvas id="qrCanvas" width="220" height="220"></canvas>
      </div>
    </div>

    <p>
      ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä¿å­˜ã—ã€<br>
      å½“æ—¥ã®å…¥å ´æ™‚ã«æç¤ºã—ã¦ãã ã•ã„ã€‚
    </p>

    <button onclick="closeAll()">ã¨ã˜ã‚‹</button>
  </div>
</div>


<script>
/*************************************************
  â–¼ â–¼ â–¼ ã“ã“ã§ç¢ºç‡å¤‰æ›´ã§ãã¾ã™ â–¼ â–¼ â–¼
*************************************************/

// æœ¬ç•ªä»•æ§˜
// const P_WAIT = 0.10; 
// const P_ERROR = 0.10;
// const P_SUCCESS = 0.01;

// ãƒ†ã‚¹ãƒˆç”¨ï¼ˆ100%æˆåŠŸï¼‰
const P_WAIT = 0.00;
const P_ERROR = 0.00;
const P_SUCCESS = 1.00;


/*************************************************/

function startReservation(){

  setTimeout(()=> decide(), 3000);
}

function decide(){
  let r = Math.random();

  if(r < P_SUCCESS){
    showSuccess();
  }
  else if(r < P_SUCCESS + P_WAIT){
    showWait();
  }
  else if(r < P_SUCCESS + P_WAIT + P_ERROR){
    showError();
  }
  else{
    showFail();
  }
}


/**************** æˆåŠŸ â†’ 10ç§’å¾ŒQR ****************/
function showSuccess(){
  document.getElementById("successPopup").style.display="flex";

  setTimeout(()=>{
    document.getElementById("successPopup").style.display="none";
    showQR();
  },10000);
}


/**************** å¾…æ©Ÿ ****************/
function showWait(){
  document.getElementById("waitPage").style.display="flex";

  setTimeout(()=>{
    document.getElementById("waitPage").style.display="none";
    showFail();
  },8000);
}


/**************** å¤±æ•— ****************/
function showFail(){
  document.getElementById("failPage").style.display="flex";
}


/**************** ã‚¨ãƒ©ãƒ¼ ****************/
function showError(){
  document.getElementById("errorPage").style.display="flex";
}


/**************** QRç”Ÿæˆ ****************/
function showQR(){

  const qr = document.getElementById("qrCanvas");
  const ctx = qr.getContext("2d");

  ctx.fillStyle="white";
  ctx.fillRect(0,0,220,220);

  ctx.fillStyle="black";
  for(let y=0; y<22; y++){
    for(let x=0; x<22; x++){

      if((x<5 && y<5) || (x>16 && y<5) || (x<5 && y>16)) continue;

      if(Math.random()>0.55){
        ctx.fillRect(x*10, y*10, 9, 9);
      }
    }
  }

  document.getElementById("qrShow").style.display="flex";
}


/**************** å…±é€š ****************/
function closeAll(){
  document.querySelectorAll(".modalBg").forEach(m=>m.style.display="none");
}
</script>

</body>
</html>
